{"idModule":"58","name":"MQTT","description":"Ce module vous permets de connecter Gladys à un broker MQTT, ce qui vous permet d'utiliser Owntracks nativement !","slug":"mqtt","createdAt":"2016-06-03 16:01:23","Developer":"Admin","version":"0.1.0","instructionsHTML":"<p>Ce module vous permets de connecter Gladys à un broker MQTT, et ainsi d'utiliser <a href=\"http://owntracks.org/\">Owntrack</a>, un tracker de position open-source.</p>\r\n<p>Ce module nécessite Gladys en version &gt;= 3.0.0.</p>\r\n<h2>Documentation</h2>\r\n<p>Pour faire fonctionner ce module, vous devez :</p>\r\n<ul>\r\n<li>Installer le module</li>\r\n<li>Avant de rebooter Gladys, vous devez dans l'interface de paramètres ( onglet &quot;Paramètres&quot; =&gt; &quot;Paramètres&quot; dans le dashboard ) définir trois variables :\r\n<ul>\r\n<li>MQTT_URL =&gt; L'URL du broker MQTT. Exemple : &quot;mqtt://xxxx.cloudmqtt.com:19692&quot;</li>\r\n<li>MQTT_USERNAME =&gt; Le username pour se connecter au broker.</li>\r\n<li>MQTT_PASSWORD =&gt; Le mot de passe du user MQTT</li>\r\n</ul></li>\r\n<li>Rebooter Gladys, dans les logs vous devriez voir : &quot;Successfully connected to MQTT : YOUR_SERVER_URL&quot; </li>\r\n</ul>\r\n<p>Votre panneau de paramètres devrait ressembler à ça :</p>\r\n<p><img src=\"http://gladysproject.com/assets/images/external/gladys-param-mqtt-screenshot.jpg\" alt=\"Gladys parameters\" class=\"img-responsive\" /></p>\r\n<h2>Mettre en place un broker MQTT</h2>\r\n<p>Pour mettre en place un broker MQTT, vous avez deux options :</p>\r\n<ul>\r\n<li>Installer votre propre broker sur un serveur perso à vous, ou sur votre Raspberry Pi.</li>\r\n<li>Utiliser un broker MQTT Cloud, il y a des hébergeurs gratuits.</li>\r\n</ul>\r\n<p>Pour tester ce module, j'ai utilisé <a href=\"https://www.cloudmqtt.com/\">CloudMQTT</a>, ce service vous permets d'avoir un broker MQTT gratuitement jusqu'à 10 connexions simultanée, parfait ici étant donné qu'on a rarement 10 périphériques connectés en même temps.</p>\r\n<h3>CloudMQTT</h3>\r\n<p>Pour utilise CloudMQTT, créez vous un compte sur leur site, et créez une instance.</p>\r\n<p>Cela devrait ressembler à ça :</p>\r\n<p><img src=\"http://gladysproject.com/assets/images/external/cloud-mqtt-screenshot.jpg\" alt=\"Cloud MQTT\" class=\"img-responsive\" /></p>\r\n<p>Vous pouvez maintenant remplir ces informations dans Gladys comme précédemment :</p>\r\n<ul>\r\n<li>MQTT_URL = mqtt://xxxx.cloudmqtt.com:PORT</li>\r\n<li>MQTT_USERNAME = User dans le &quot;Info panel&quot;</li>\r\n<li>MQTT_PASSWORD = Password dans le &quot;info panel&quot;</li>\r\n</ul>\r\n<h2>Owntracks</h2>\r\n<p>Pour utilise OwnTracks, vous devez installer l'application <a href=\"https://itunes.apple.com/us/app/mqttitude/id692424691?mt=8\">iOS</a> ou <a href=\"https://play.google.com/store/apps/details?id=org.owntracks.android\">Android</a> .</p>\r\n<p>Dans <code>Preferences</code>, aller à <code>Connection</code>:</p>\r\n<ul>\r\n<li><code>Mode</code> =&gt; &quot;Private MQTT&quot;,</li>\r\n<li><code>Host</code> =&gt; \r\n<ul>\r\n<li><code>Host</code> = xxxx.cloudmqtt.com</li>\r\n<li><code>Port</code> = SSL PORT (attention, ce n'est pas le même port qu'avant)</li>\r\n</ul></li>\r\n<li><code>Identification</code> =&gt; \r\n<ul>\r\n<li><code>Username</code> =&gt; MQTTT username</li>\r\n<li><code>Password</code> =&gt; MQTT Password</li>\r\n<li><code>Device ID</code> =&gt; &quot;Ce que vous voulez, le nom de votre téléphone par exemple&quot;</li>\r\n<li><code>Tracker ID</code> =&gt; Votre UserID dans Gladys ( très important ! ), ou l'ID du user Gladys que vous voulez tracker. Vous trouverez cet ID dans &quot;Paramètres&quot; =&gt; &quot;Mon Compte&quot; dans le dashboard Gladys.</li>\r\n</ul></li>\r\n</ul>\r\n<p>Enregistrez les informations, vous devriez voir &quot;Connected&quot; en bas de l'écran ! </p>","instructionsMarkDown":"Ce module vous permets de connecter Gladys à un broker MQTT, et ainsi d'utiliser [Owntrack](http://owntracks.org/), un tracker de position open-source.\n\nCe module nécessite Gladys en version >= 3.0.0.\n\n## Documentation\n\nPour faire fonctionner ce module, vous devez :\n\n- Installer le module\n- Avant de rebooter Gladys, vous devez dans l'interface de paramètres ( onglet \"Paramètres\" => \"Paramètres\" dans le dashboard ) définir trois variables :\n\t- MQTT_URL => L'URL du broker MQTT. Exemple : \"mqtt://xxxx.cloudmqtt.com:19692\"\n\t- MQTT_USERNAME\t=> Le username pour se connecter au broker.\n\t- MQTT_PASSWORD => Le mot de passe du user MQTT\n- Rebooter Gladys, dans les logs vous devriez voir : \"Successfully connected to MQTT : YOUR_SERVER_URL\" \n\nVotre panneau de paramètres devrait ressembler à ça :\n\n![Gladys parameters](http://gladysproject.com/assets/images/external/gladys-param-mqtt-screenshot.jpg)\n\n## Mettre en place un broker MQTT\n\nPour mettre en place un broker MQTT, vous avez deux options :\n- Installer votre propre broker sur un serveur perso à vous, ou sur votre Raspberry Pi.\n- Utiliser un broker MQTT Cloud, il y a des hébergeurs gratuits.\n\nPour tester ce module, j'ai utilisé [CloudMQTT](https://www.cloudmqtt.com/), ce service vous permets d'avoir un broker MQTT gratuitement jusqu'à 10 connexions simultanée, parfait ici étant donné qu'on a rarement 10 périphériques connectés en même temps.\n\n### CloudMQTT\n\nPour utilise CloudMQTT, créez vous un compte sur leur site, et créez une instance.\n\nCela devrait ressembler à ça :\n\n![Cloud MQTT](http://gladysproject.com/assets/images/external/cloud-mqtt-screenshot.jpg)\n\nVous pouvez maintenant remplir ces informations dans Gladys comme précédemment :\n\n- MQTT_URL = mqtt://xxxx.cloudmqtt.com:PORT\n- MQTT_USERNAME = User dans le \"Info panel\"\n- MQTT_PASSWORD = Password dans le \"info panel\"\n\n\n## Owntracks\n\nPour utilise OwnTracks, vous devez installer l'application [iOS](https://itunes.apple.com/us/app/mqttitude/id692424691?mt=8) ou [Android](https://play.google.com/store/apps/details?id=org.owntracks.android) .\n\nDans `Preferences`, aller à `Connection`:\n\n- `Mode` => \"Private MQTT\",\n- `Host` => \n\t- `Host` = xxxx.cloudmqtt.com\n\t- `Port` = SSL PORT (attention, ce n'est pas le même port qu'avant)\n- `Identification` => \n\t- `Username` => MQTTT username\n\t- `Password` => MQTT Password\n\t- `Device ID` => \"Ce que vous voulez, le nom de votre téléphone par exemple\"\n\t- `Tracker ID` => Votre UserID dans Gladys ( très important ! ), ou l'ID du user Gladys que vous voulez tracker. Vous trouverez cet ID dans \"Paramètres\" => \"Mon Compte\" dans le dashboard Gladys.\n\nEnregistrez les informations, vous devriez voir \"Connected\" en bas de l'écran ! ","link":"https://github.com/gladysassistant/gladys-mqtt","img":"86fd1c06-ba7f-484f-b692-c770d2457f21.jpg","note":null,"nbNotes":"0"}